<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NASA Space Explorer</title>
    
    <!-- Google Fonts - NASA uses clean, modern sans-serif fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* Official NASA Brand Colors */
            --nasa-blue: #0B3D91;
            --nasa-red: #FC3D21;
            --nasa-white: #FFFFFF;
            --nasa-light-gray: #F5F5F5;
            --nasa-dark-gray: #1A1A1A;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #000428 0%, #004e92 100%);
            color: var(--nasa-dark-gray);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Header Section */
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 20px;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .nasa-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .logo-circle {
            width: 60px;
            height: 60px;
            background: var(--nasa-blue);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 700;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .logo-circle::before {
            content: '';
            position: absolute;
            width: 30px;
            height: 3px;
            background: var(--nasa-red);
            transform: rotate(-45deg);
        }

        h1 {
            font-size: 2.5rem;
            color: var(--nasa-blue);
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .tagline {
            color: var(--nasa-red);
            font-size: 1.1rem;
            font-weight: 600;
            margin-top: 10px;
        }

        /* Space Fact Section */
        .space-fact {
            background: linear-gradient(135deg, var(--nasa-blue) 0%, #1a5dad 100%);
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
            color: white;
            box-shadow: 0 8px 30px rgba(11, 61, 145, 0.4);
        }

        .space-fact h3 {
            font-size: 1.2rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .space-fact-icon {
            font-size: 1.5rem;
        }

        .space-fact p {
            font-size: 1rem;
            line-height: 1.6;
            opacity: 0.95;
        }

        /* Controls Section */
        .controls {
            background: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 40px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
        }

        .date-selectors {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .date-group {
            flex: 1;
            min-width: 250px;
        }

        .date-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--nasa-blue);
            font-weight: 600;
            font-size: 0.95rem;
        }

        .date-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--nasa-blue);
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        .date-group input:focus {
            outline: none;
            border-color: var(--nasa-red);
            box-shadow: 0 0 0 3px rgba(252, 61, 33, 0.1);
        }

        .fetch-button {
            display: block;
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
            padding: 15px 30px;
            background: linear-gradient(135deg, var(--nasa-red) 0%, #d63118 100%);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(252, 61, 33, 0.3);
        }

        .fetch-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(252, 61, 33, 0.5);
        }

        .fetch-button:active {
            transform: translateY(0);
        }

        /* Loading Message */
        .loading-container {
            display: none;
            text-align: center;
            padding: 60px 20px;
            background: white;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
        }

        .loading-container.active {
            display: block;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 5px solid var(--nasa-light-gray);
            border-top: 5px solid var(--nasa-blue);
            border-radius: 50%;
            margin: 0 auto 20px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 1.3rem;
            color: var(--nasa-blue);
            font-weight: 600;
        }

        /* Gallery Section */
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .gallery-item {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .gallery-item:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
        }

        .gallery-image-container {
            width: 100%;
            height: 250px;
            overflow: hidden;
            background: var(--nasa-dark-gray);
            position: relative;
        }

        .gallery-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.4s ease;
        }

        .gallery-item:hover .gallery-image {
            transform: scale(1.1);
        }

        .video-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--nasa-red);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .gallery-info {
            padding: 20px;
        }

        .gallery-title {
            font-size: 1.2rem;
            color: var(--nasa-blue);
            font-weight: 600;
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .gallery-date {
            color: var(--nasa-red);
            font-size: 0.95rem;
            font-weight: 600;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 1000;
            overflow-y: auto;
            animation: fadeIn 0.3s ease;
        }

        .modal.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            max-width: 1200px;
            margin: 50px auto;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 45px;
            height: 45px;
            background: var(--nasa-red);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .modal-close:hover {
            background: #d63118;
            transform: rotate(90deg);
        }

        .modal-media {
            width: 100%;
            max-height: 600px;
            object-fit: contain;
            background: var(--nasa-dark-gray);
        }

        .modal-video {
            width: 100%;
            height: 600px;
        }

        .modal-info {
            padding: 30px;
        }

        .modal-title {
            font-size: 2rem;
            color: var(--nasa-blue);
            font-weight: 700;
            margin-bottom: 10px;
        }

        .modal-date {
            color: var(--nasa-red);
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .modal-explanation {
            font-size: 1.05rem;
            line-height: 1.8;
            color: var(--nasa-dark-gray);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }

            .date-selectors {
                flex-direction: column;
            }

            .gallery {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .modal-content {
                margin: 20px;
            }

            .modal-title {
                font-size: 1.5rem;
            }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 80px 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .empty-state h2 {
            color: var(--nasa-blue);
            font-size: 1.8rem;
            margin-bottom: 15px;
        }

        .empty-state p {
            color: var(--nasa-dark-gray);
            font-size: 1.1rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="nasa-logo">
                <div class="logo-circle">
                    <span>NASA</span>
                </div>
                <div>
                    <h1>NASA Space Explorer</h1>
                    <p class="tagline">Astronomy Picture of the Day</p>
                </div>
            </div>
        </header>

        <!-- Random Space Fact -->
        <div class="space-fact" id="spaceFact">
            <h3><span class="space-fact-icon">üåü</span> Did You Know?</h3>
            <p id="factText">Loading amazing space fact...</p>
        </div>

        <!-- Controls -->
        <div class="controls">
            <div class="date-selectors">
                <div class="date-group">
                    <label for="startDate">Start Date:</label>
                    <input type="date" id="startDate" max="">
                </div>
                <div class="date-group">
                    <label for="endDate">End Date:</label>
                    <input type="date" id="endDate" max="">
                </div>
            </div>
            <button class="fetch-button" id="fetchButton">üöÄ Get Space Images</button>
        </div>

        <!-- Loading Message -->
        <div class="loading-container" id="loadingContainer">
            <div class="loading-spinner"></div>
            <p class="loading-text">Fetching images from NASA's archives...</p>
        </div>

        <!-- Gallery -->
        <div class="gallery" id="gallery">
            <div class="empty-state">
                <div class="empty-state-icon">üåå</div>
                <h2>Ready to Explore the Universe?</h2>
                <p>Select a date range above and click "Get Space Images" to view NASA's stunning Astronomy Pictures of the Day.</p>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <button class="modal-close" id="modalClose">√ó</button>
            <div id="modalMediaContainer"></div>
            <div class="modal-info">
                <h2 class="modal-title" id="modalTitle"></h2>
                <p class="modal-date" id="modalDate"></p>
                <p class="modal-explanation" id="modalExplanation"></p>
            </div>
        </div>
    </div>

    <script>
        // NASA API Configuration
        const NASA_API_KEY = 'KQAEf5GjK8beEpAf79rzejt0UXLGONTB7JotjCrK';
        const APOD_BASE_URL = 'https://api.nasa.gov/planetary/apod';

        // Space facts for random display
        const spaceFacts = [
            "A day on Venus is longer than a year on Venus. It takes 243 Earth days to rotate once, but only 225 Earth days to orbit the Sun.",
            "Neutron stars can spin 600 times per second. They are the densest objects in the universe aside from black holes.",
            "The Sun accounts for 99.86% of the mass in our solar system. All the planets combined make up just 0.14%.",
            "One million Earths could fit inside the Sun. If the Sun was a hollow ball, you could fit around 1.3 million Earths inside it.",
            "The footprints on the Moon will last for millions of years. There's no wind or water on the Moon to erode them away.",
            "Saturn would float in water. Despite its enormous size, Saturn is the least dense planet in our solar system.",
            "A year on Neptune lasts 165 Earth years. If you were born on Neptune, you'd have to wait a very long time for your first birthday!",
            "The Milky Way galaxy contains between 200-400 billion stars. And there are estimated to be 2 trillion galaxies in the observable universe.",
            "Light from the Sun takes 8 minutes and 20 seconds to reach Earth. We always see the Sun as it was 8 minutes ago.",
            "The coldest place in the universe we know of is the Boomerang Nebula, at just 1 degree Kelvin (-272¬∞C or -458¬∞F)."
        ];

        // DOM Elements
        const startDateInput = document.getElementById('startDate');
        const endDateInput = document.getElementById('endDate');
        const fetchButton = document.getElementById('fetchButton');
        const loadingContainer = document.getElementById('loadingContainer');
        const gallery = document.getElementById('gallery');
        const modal = document.getElementById('modal');
        const modalClose = document.getElementById('modalClose');
        const factText = document.getElementById('factText');

        // Initialize
        function init() {
            setDefaultDates();
            displayRandomFact();
            setupEventListeners();
        }

        // Set default dates (last 9 days)
        function setDefaultDates() {
            const today = new Date();
            const endDate = new Date(today);
            endDate.setDate(endDate.getDate() - 1); // Yesterday (APOD updates once per day)
            
            const startDate = new Date(endDate);
            startDate.setDate(startDate.getDate() - 8); // 9 days total

            startDateInput.value = formatDate(startDate);
            endDateInput.value = formatDate(endDate);
            
            // Set max date to today
            const maxDate = formatDate(today);
            startDateInput.max = maxDate;
            endDateInput.max = maxDate;
        }

        // Format date as YYYY-MM-DD
        function formatDate(date) {
            return date.toISOString().split('T')[0];
        }

        // Display random space fact
        function displayRandomFact() {
            const randomFact = spaceFacts[Math.floor(Math.random() * spaceFacts.length)];
            factText.textContent = randomFact;
        }

        // Setup event listeners
        function setupEventListeners() {
            fetchButton.addEventListener('click', fetchSpaceImages);
            modalClose.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) closeModal();
            });
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && modal.classList.contains('active')) {
                    closeModal();
                }
            });
        }

        // Fetch space images from NASA API
        async function fetchSpaceImages() {
            const startDate = startDateInput.value;
            const endDate = endDateInput.value;

            // Validate dates
            if (!startDate || !endDate) {
                alert('Please select both start and end dates.');
                return;
            }

            if (new Date(startDate) > new Date(endDate)) {
                alert('Start date must be before end date.');
                return;
            }

            // Calculate number of days
            const daysDiff = Math.ceil((new Date(endDate) - new Date(startDate)) / (1000 * 60 * 60 * 24)) + 1;
            
            if (daysDiff !== 9) {
                alert('Please select exactly 9 consecutive days.');
                return;
            }

            // Show loading, hide gallery
            loadingContainer.classList.add('active');
            gallery.innerHTML = '';

            try {
                // Fetch data from NASA API
                const response = await fetch(
                    `${APOD_BASE_URL}?api_key=${NASA_API_KEY}&start_date=${startDate}&end_date=${endDate}`
                );

                if (!response.ok) {
                    throw new Error(`API Error: ${response.status}`);
                }

                const data = await response.json();
                
                // Hide loading
                loadingContainer.classList.remove('active');

                // Display gallery
                displayGallery(data);

            } catch (error) {
                console.error('Error fetching space images:', error);
                loadingContainer.classList.remove('active');
                gallery.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">‚ùå</div>
                        <h2>Oops! Something went wrong</h2>
                        <p>Unable to fetch images from NASA. Please try again.</p>
                    </div>
                `;
            }
        }

        // Display gallery of images
        function displayGallery(items) {
            gallery.innerHTML = '';

            items.forEach(item => {
                const galleryItem = document.createElement('div');
                galleryItem.className = 'gallery-item';
                
                const isVideo = item.media_type === 'video';
                
                galleryItem.innerHTML = `
                    <div class="gallery-image-container">
                        ${isVideo ? 
                            `<img src="${getThumbnailFromVideo(item.url)}" alt="${item.title}" class="gallery-image">
                             <span class="video-badge">‚ñ∂Ô∏è Video</span>` :
                            `<img src="${item.url}" alt="${item.title}" class="gallery-image">`
                        }
                    </div>
                    <div class="gallery-info">
                        <h3 class="gallery-title">${item.title}</h3>
                        <p class="gallery-date">${formatDisplayDate(item.date)}</p>
                    </div>
                `;

                galleryItem.addEventListener('click', () => openModal(item));
                gallery.appendChild(galleryItem);
            });
        }

        // Get thumbnail for video entries
        function getThumbnailFromVideo(url) {
            // Extract YouTube video ID if it's a YouTube video
            if (url.includes('youtube.com') || url.includes('youtu.be')) {
                const videoId = extractYouTubeID(url);
                return `https://img.youtube.com/vi/${videoId}/maxresdefault.jpg`;
            }
            // For other videos, return a placeholder
            return 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 300"%3E%3Crect fill="%230B3D91" width="400" height="300"/%3E%3Ctext x="200" y="150" font-family="Arial" font-size="60" fill="white" text-anchor="middle" dominant-baseline="middle"%3E‚ñ∂Ô∏è%3C/text%3E%3C/svg%3E';
        }

        // Extract YouTube video ID
        function extractYouTubeID(url) {
            const regExp = /^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[7].length === 11) ? match[7] : null;
        }

        // Format date for display
        function formatDisplayDate(dateString) {
            const date = new Date(dateString + 'T00:00:00');
            return date.toLocaleDateString('en-US', { 
                month: 'long', 
                day: 'numeric', 
                year: 'numeric' 
            });
        }

        // Open modal with full details
        function openModal(item) {
            const modalTitle = document.getElementById('modalTitle');
            const modalDate = document.getElementById('modalDate');
            const modalExplanation = document.getElementById('modalExplanation');
            const modalMediaContainer = document.getElementById('modalMediaContainer');

            modalTitle.textContent = item.title;
            modalDate.textContent = formatDisplayDate(item.date);
            modalExplanation.textContent = item.explanation;

            // Handle media (image or video)
            if (item.media_type === 'video') {
                modalMediaContainer.innerHTML = `
                    <iframe 
                        src="${item.url}" 
                        class="modal-video" 
                        frameborder="0" 
                        allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen>
                    </iframe>
                `;
            } else {
                modalMediaContainer.innerHTML = `
                    <img src="${item.hdurl || item.url}" alt="${item.title}" class="modal-media">
                `;
            }

            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // Close modal
        function closeModal() {
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Initialize app
        init();
    </script>
</body>
</html>
